<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 2019-12-02 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20191202" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Eiffel Intelligence &#x2013; Configuration</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

          
                      </head>
        <body class="topBarEnabled">
          
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                                                                                    <a class="brand" href="./" >

                                
                                    Eiffel Intelligence
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Home">Home</a>
</li>
                  
                      <li class="dropdown-submenu">
                                      <a href="running-eiffel-intelligence.html"  title="Running Eiffel Intelligence">Running Eiffel Intelligence</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="configuration.html"  title="Configuration">Configuration</a>
</li>
                                  <li>      <a href="docker.html"  title="Running in Docker">Running in Docker</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="subscriptions.html"  title="Understanding subscriptions">Understanding subscriptions</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="subscription-with-REST-POST-notification.html"  title="Subscription with REST POST notification">Subscription with REST POST notification</a>
</li>
                                  <li>      <a href="triggering-jenkins-jobs.html"  title="HTTP POST notification to trigger parameterized Jenkins jobs">HTTP POST notification to trigger parameterized Jenkins jobs</a>
</li>
                                  <li>      <a href="subscription-with-email-notification.html"  title="Subscription with Email notification">Subscription with Email notification</a>
</li>
                                  <li>      <a href="step-by-step-subscription-notification.html"  title="Step-by-step Subscription Notification">Step-by-step Subscription Notification</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="rules.html"  title="Understanding rules">Understanding rules</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="merge-resolver-rules.html"  title="Merge Resolver Rules">Merge Resolver Rules</a>
</li>
                                  <li>      <a href="history-rules.html"  title="History Rules">History Rules</a>
</li>
                                  <li>      <a href="example-rules.html"  title="Example Rules">Example Rules</a>
</li>
                                  <li>      <a href="mapping-rules-to-aggregations.html"  title="Mapping Rules To Aggregations">Mapping Rules To Aggregations</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="step-by-step-aggregation.html"  title="Step-by-step aggregation">Step-by-step aggregation</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="artifact-created-event-aggregation.html"  title="ArtifactCreatedEvent aggregation">ArtifactCreatedEvent aggregation</a>
</li>
                                  <li>      <a href="test-case-triggered-event-aggregation.html"  title="TestCaseTriggeredEvent aggregation">TestCaseTriggeredEvent aggregation</a>
</li>
                                  <li>      <a href="test-case-started-event-aggregation.html"  title="TestCaseStartedEvent aggregation">TestCaseStartedEvent aggregation</a>
</li>
                                  <li>      <a href="test-case-finished-event-aggregation.html"  title="TestCaseFinishedEvent aggregation">TestCaseFinishedEvent aggregation</a>
</li>
                                  <li>      <a href="artifact-published-event-aggregation.html"  title="ArtifactPublishedEvent aggregation">ArtifactPublishedEvent aggregation</a>
</li>
                                  <li>      <a href="confidence-level-modified-event-aggregation.html"  title="ConfidenceLevelModifiedEvent">ConfidenceLevelModifiedEvent</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="REST-API.html"  title="REST API">REST API</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="query.html"  title="Query">Query</a>
</li>
                                  <li>      <a href="failed-notifications.html"  title="Failed notifications">Failed notifications</a>
</li>
                                  <li>      <a href="running-rules-on-objects.html"  title="Running rules on objects">Running rules on objects</a>
</li>
                                  <li>      <a href="authentication.html"  title="Authentication">Authentication</a>
</li>
                                  <li>      <a href="subscription-API.html"  title="Subscriptions">Subscriptions</a>
</li>
                                  <li>      <a href="status.html"  title="Status">Status</a>
</li>
                                  <li>      <a href="templates.html"  title="Get templates">Get templates</a>
</li>
                              </ul>
            </li>
                  
                      <li>      <a href="compatibility.html"  title="Compatibility">Compatibility</a>
</li>
                  
                      <li>      <a href="known-limitations.html"  title="Known limitations">Known limitations</a>
</li>
                          </ul>
      </li>
                  </ul>
          
          
          
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Eiffel Intelligence</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                              <li class="">
                    <a href="index.html" title="Home">
        Home</a>
                    <span class="divider">-</span>
      </li>
        <li class="active ">Configuration</li>
        
              
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-12-02</li>
              <li id="projectVersion" class="pull-right">
                    Version: 2.0.0
        </li>
            
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Home">
          <span class="none"></span>
        Home</a>
            </li>
                                                                                              
      <li>
  
                          <a href="running-eiffel-intelligence.html" title="Running Eiffel Intelligence">
          <span class="icon-chevron-down"></span>
        Running Eiffel Intelligence</a>
                    <ul class="nav nav-list">
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Configuration</a>
          </li>
                    
      <li>
  
                          <a href="docker.html" title="Running in Docker">
          <span class="none"></span>
        Running in Docker</a>
            </li>
              </ul>
        </li>
                                                                                                                        
      <li>
  
                          <a href="subscriptions.html" title="Understanding subscriptions">
          <span class="icon-chevron-right"></span>
        Understanding subscriptions</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="rules.html" title="Understanding rules">
          <span class="icon-chevron-right"></span>
        Understanding rules</a>
                  </li>
                                                                                                                                                            
      <li>
  
                          <a href="step-by-step-aggregation.html" title="Step-by-step aggregation">
          <span class="icon-chevron-right"></span>
        Step-by-step aggregation</a>
                  </li>
                                                                                                                                                                              
      <li>
  
                          <a href="REST-API.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                
      <li>
  
                          <a href="compatibility.html" title="Compatibility">
          <span class="none"></span>
        Compatibility</a>
            </li>
                
      <li>
  
                          <a href="known-limitations.html" title="Known limitations">
          <span class="none"></span>
        Known limitations</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Configuration</h1>
<p>The configuration for RabbitMQ, MongoDB etc. can be set in the <a class="externalLink" href="https://github.com/eiffel-community/eiffel-intelligence/blob/master/src/main/resources/application.properties">application.properties</a> file. You can also set them as system properties using the -D flags when starting Eiffel Intelligence.</p>
<div class="section">
<h2><a name="Setting_up_multiple_EI_instances"></a>Setting up multiple EI instances</h2>
<p>Eiffel Intelligence is designed to be able to collect different information in different objects. What information to be collected from what events to what object is configured using a set of rules.</p>
<div class="section">
<h3><a name="Set_up_multiple_instances_with_different_rule_sets_in_each_instance"></a>Set up multiple instances with different rule sets in each instance</h3>
<p>In this case we use the same instance of RabbitMQ and MongoDB.</p>
<ul>

<li><b>rabbitmq.consumerName</b> property should be different for each rule set. Otherwise the rabbitMQ will split the events in the queue among all the instances listening to that queue.</li>
<li>MongoDb collection names should also be different for each rule set.</li>
</ul>
<p><img src="images/multiple_EI_instances.png" alt="" /></img></p></div>
<div class="section">
<h3><a name="Set_up_multiple_instances_with_same_rule_set"></a>Set up multiple instances with same rule set</h3>
<p>This situation may be needed when the events throughput is very high. In this case the same configuration file is copied to the server where the extra instance will be started.</p>
<p><img src="images/multiple_EI_instances_same_rule.png" alt="" /></img></p></div></div>
<div class="section">
<h2><a name="Configure_Eiffel_Intelligence_with_extraction_rules_for_specific_Eiffel_protocol_version"></a>Configure Eiffel Intelligence with extraction rules for specific Eiffel protocol version</h2>
<p>Extraction rules for a specific Eiffel protocol versions is configured by setting &#x201c;rules.path&#x201d; property in <a class="externalLink" href="https://github.com/eiffel-community/eiffel-intelligence/blob/master/src/main/resources/application.properties">application.properties</a> to point to the correct extraction rules json file.</p>
<p>Eiffel Intelligence provides default extractions rules json files for different Eiffel protocol versions inside the war artifact file and in the source code repository. All default extraction rules json files can be found here: <a class="externalLink" href="https://github.com/eiffel-community/eiffel-intelligence/blob/master/src/main/resources/rules">extraction rules</a></p>
<p>Example of setting &#x201c;rules.path&#x201d; property in application.properties using default extraction rules json files provided in eiffel-intelligence war file: - rules.path: /rules/ArtifactRules-Eiffel-Agen-Version.json - rules.path: /rules/ArtifactRules-Eiffel-Toulouse-Version.json - rules.path: /rules/SourceChangeObjectRules-Eiffel-Toulouse-Version.json</p>
<p>It is possible to use external provided extraction rules by providing the full path or a URI. URI schemes that are accepted are &#x2018;file&#x2019;,&#x2018;http&#x2019; and &#x2018;https&#x2019;. Examples of setting &#x201c;rules.path&#x201d; property to an external rules file: - rules.path: /full/path/to/ExtractionRules.json - rules.path: <a class="externalLink" href="file:///full/path/to/ExtractionRules.json">file:///full/path/to/ExtractionRules.json</a> - rules.path: <a class="externalLink" href="file://localhost/full/path/to/ExtractionRules.json">file://localhost/full/path/to/ExtractionRules.json</a> - rules.path: <a class="externalLink" href="http://somehost.com/full/path/to/ExtractionRules.json">http://somehost.com/full/path/to/ExtractionRules.json</a> - rules.path: <a class="externalLink" href="https://somehost.com/full/path/to/ExtractionRules.json">https://somehost.com/full/path/to/ExtractionRules.json</a></p></div>
<div class="section">
<h2><a name="Configuring_aggregations"></a>Configuring aggregations</h2>
<p>Eiffel Intelligence saves aggregated objects in a database. It is possible to configure the collection name, the time to live and the name of the aggregated object using the below properties:</p>
<ul>

<li>aggregated.object.name</li>
<li>aggregated.collection.name</li>
</ul>
<p>If Eiffel Intelligence is set up with <a class="externalLink" href="https://github.com/eiffel-community/eiffel-intelligence/blob/master/src/main/resources/all_event_rules.json">all_event_rules</a> it is recommended to set a time to live value to avoid having a copy of Event repository. Recommended settings is 10 minutes.</p>
<ul>

<li>aggregated.collection.ttlValue (<i>seconds</i>)</li>
</ul>
<div class="section">
<h3><a name="Testing_aggregation_rules"></a>Testing aggregation rules</h3>
<p>To test new rules for Eiffel Intelligence the property <b>testaggregated.enabled</b> can be set to true. This gives users the possibility to try out different rule sets on a specific set of Eiffel events and see the resulting aggregated object.</p></div>
<div class="section">
<h3><a name="Wait_list"></a>Wait list</h3>
<p>If Eiffel Intelligence receives events that are not connected to any existing aggregated objects, and it is not declared as start event in the rules, the event is stored in the wait list database for a while. The &#x201c;time-to-live&#x201d; value limits how long an event is stored in the wait list.</p>
<ul>

<li>waitlist.collection.name</li>
<li>waitlist.collection.ttlValue (<i>seconds</i>)</li>
</ul>
<p>It is possible to configure how often Eiffel Intelligence should handle unprocessed events lying in the wait list. These properties are in <b>milliseconds</b>:</p>
<ul>

<li>waitlist.initialDelayResend (<i>milliseconds</i>)</li>
<li>waitlist.fixedRateResend (<i>milliseconds</i>)</li>
</ul></div></div>
<div class="section">
<h2><a name="Subscriptions"></a>Subscriptions</h2>
<p>Eiffel Intelligence stores subscriptions in a database with the collection name configured with the property <b>subscription.collection.name</b>. When subscriptions have fulfilled their requirements and notifications should not be repeated, the subscription is stored together with the matched aggregated object in the database. The name of this particular collection is defined by the below property:</p>
<ul>

<li>subscription.collection.name</li>
<li>subscription.collection.repeatFlagHandlerName</li>
</ul>
<div class="section">
<h3><a name="Notifications"></a>Notifications</h3>
<p><b>email.sender</b> defines who should be the sender of the email Eiffel Intelligence sends when a subscription is triggered. If a subscription is defined with the notificationMeta &#x201c;<a class="externalLink" href="mailto:receivermail@example.com">receivermail@example.com</a>&#x201d; this receiver would be notified when the subscription fulfills all conditions via an e-mail. The sender of this e-mail is defined by the <b>email.sender</b> property. The value for &#x201c;email.subject&#x201d; is used by all subscriptions which have been created via the REST API. When a subscription is created using the Eiffel Intelligence front-end GUI it is possible to set individual e-mail subject for each subscription. Note that these two properties are mandatory to set.</p>
<ul>

<li>email.sender</li>
<li>email.subject</li>
</ul></div>
<div class="section">
<h3><a name="Failed_notifications"></a>Failed notifications</h3>
<p>Should the subscription notification for some reason fail. It is possible to configure what the collection name for failed notifications should be in the property <b>failed.notification.collection-name</b>. <b>notification.ttl.value</b> tells Eiffel Intelligence how long a failed notification will be stored in the database before deletion. With <b>notification.failAttempt</b> property, it is possible to configure the number of attempts Eiffel Intelligence will retry to make a REST POST notification when a subscription is triggered.</p>
<ul>

<li>failed.notification.collection-name</li>
<li>notification.ttl.value</li>
<li>notification.failAttempt</li>
</ul></div>
<div class="section">
<h3><a name="Configure_search_in_Event_repository"></a>Configure search in Event repository</h3>
<p>For Eiffel Intelligence to search for linked events Event repository is used. <b>er.url</b> takes a full URL to such a repository.</p>
<ul>

<li>er.url</li>
</ul></div></div>
<div class="section">
<h2><a name="Security"></a>Security</h2>
<div class="section">
<h3><a name="LDAP"></a>LDAP</h3>
<p>You can set up authentication for CRUD operations on subscriptions by configuring the LDAP settings. Multiple LDAP servers can be configured. The priority is in the order they are written. This means that authentication will first be tried on the first defined LDAP and if that fails the second will be tried and so on. LDAP is enabled with the <b>ldap.enabled</b> property and the settings are defined in the <b>ldap.server.list</b> property.</p>

<div>
<div>
<pre class="source">ldap.enabled: true
ldap.server.list: [\
    {\
        &quot;url&quot;: &quot;ldaps://first.com:369&quot;,\
        &quot;base.dn&quot;: &quot;dc=first,dc=com&quot;,\
        &quot;username&quot;: &quot;cn=admin,dc=first,dc=com&quot;,\
        &quot;password&quot;: &quot;YWRtaW4=&quot;,\
        &quot;user.filter&quot;: &quot;uid={0}&quot;\
    },\
    {\
        &quot;url&quot;: &quot;ldap://second:389/dc=example,dc=org&quot;,\
        &quot;base.dn&quot;: &quot;&quot;,\
        &quot;username&quot;: &quot;&quot;,\
        &quot;password&quot;: &quot;&quot;,\
        &quot;user.filter&quot;: &quot;uid={0}&quot;\
    }\
]\
</pre></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                          
                </div>

        
                </div>
    </footer>
        </body>
</html>
